| Срок исполнения | Имя папки | branch |
| ----------- | ------------- | ------------- |
|  | codejam-chess | codejam-chess |

## Перед выполнением задания необходимо выполнить [Codejam chess Часть 1](codejam-chess-part-one.md)

# Codejam chess Часть 2

## Задача

Необходимо реализовать игру "Шахматы" с возможностью:
- Играть двум игрокам с одного компьютера
- Играть двум игрокам по сети через сервер
- Играть на одном компьютере против ИИ противника (Hacker Score)

### UX прототип

[Базовый макет с прототипом функциональности](https://www.figma.com/file/evlqVrepoIieC5KiVcRFYt/Chess)

Возможно вносить любые изменения в изначальный дизайн, однако функционал должен быть идентичен поведению из прототипа.

## Требования к функционалу приложения

* В приложение должен быть добавлен сетевой режим.
* Соединение между игроками должно происходить через websocket.
* В лобби перед стартом игры должна быть возможность:
    * Начать поиск соперника для текущего игрока.
    * Искать открытую сессию и присоединится к ней в качестве соперника.
* В лобби должна быть возможность отменить поиск соперника по сетевой игре и вернуться в режим игры на одном пк.
* При поиске соперника процесс должен быть обозначен с помощью loader.
* После подключения игрока должна начаться партия.
* Иконка противника должна отображаться согласно информации которую он указал до того как начал поиск противника.
* Игровое поле должно соответствовать требованиям из "Часть 1".

## Задания повышенной сложности:

* В "Лобби" должна быть ссылка на страницу с повторами.
* Реализовать механику "Повтор", позволяющую просмотреть матч.
* Реализовать сохранение сыгранных матчей, с возможностью выбора и просмотра.
* Информация по повторам должна содержаться в indexDB.
* Страница "Повторы" должна содержать все сыгранные партии.
* Пользователь находящийся на странице "Повторы" должен иметь возможность вернуться в лобби и начать новую игру.
* Карточка повтора должна содержать следующую информацию:
    * Иконки противников с их цветами.
    * Победивший игрок должен быть помечен.
    * Число ходов до завершения партии.
    * Время, затраченное до конца партии.
* При клике на карточку пользователь должен перейти на экран повтора.
* Позиции игроков при повторе не имеют значения.
* Экран повтора должен содержать:    
    * Иконки противников.
    * Истории ходов.
    * Выделение игрока совершающего ход.
    * Все ходы должны быть анимированы.
    * Зритель должен иметь возможность прекратить повтор (Кнопка "Завершить повтор"). 
    * После клика на кнопку "Завершить повтор" зритель должен попасть на страницу "Лобби".
    * Зритель должен иметь возможность выбрать другой "Повтор" (Кнопка "Выбрать повтор"). 
    * Время по умолчанию должно соответствовать реальному времени партии.
    * Зритель должен иметь возможность ускорить время партии (x2, x3, x4).
    * Зритель должен видеть победителя текущей воспроизводящийся партии.   

### Особенности реализации в зависимости от выбранного типа игры:

Режим игры по сети:
* Не должно быть никакой анимации при смене игрока, совершающего ход.
* Перед запуском игры игроки должны получить цвет случайным образом.
* Позиция доски должна соответствовать полученному цвету (Фигуры соответствующего цвета должны быть снизу).
* Ходы противника должны быть анимированны.

#### eslint
`eslint` должен быть настроен

- `eslint` включен в` package.json`,
- вы должны использовать конфигурацию `eslint-config-airbnb-base`
- весь код должен быть проверен
- проверка eslint выполняется запуском команды `npm run lint`

#### Ограничения
- задание должно работать в Chrome
- Использование material design, semantic-ui или bootstrap допускается
- Вы НЕ МОЖЕТЕ использовать какие-либо фреймворки, такие как Angular / React / Vue
- Вы можете использовать препроцессоры
- Вы можете общаться, переписываться в чате, гуглить и использовать stackoverflow
- Вы можете использовать lodash.js

### Последовательность выполнения

- Создать веб сервер способный принимать и управлять подключениями с помощью websocket
- Реализовать клиентскую логику передачи информации о пользователе и игре на сервер.
- Внести изменения в игровой цикл в соответствии с требованиями сетевой игры.

Ментор может оставлять комментарии во время ревью, и вы, как студент, можете пофиксить замечания и получить более высокую оценку.

## Требования к коммитам, PR и репозиторию

[Общие требования из stage 2](https://github.com/rolling-scopes-school/docs/blob/master/docs/stage2.md).

## Оценка

Максимальный балл - **135**

### Основное задание

- [ ] **+100** - реализован механизм игры по сети с живым противником с использованием websocket 

Итого: **100**

### Опциональные задания: 

- [ ] **+5** - после победы есть возможность перейти на страницу повторов
- [ ] **+5** - в лобби есть возможность перейти на страницу повторов
- [ ] **+10** - реализована страница выбора повторов
- [ ] **+5** - повторы не удаляются после перезагрузки страницы 
- [ ] **+5** - есть кнопка выйти в лобби
- [ ] **+10** - для каждого матча есть карточка с кратким описанием матча
- [ ] **+5** - после клики на карточку запускается запуск матча
- [ ] **+30** - после запуска боя начинается автоматическое воспроизведение игры
- [ ] **+10** - реализована возможность изменять скорость игры x1, x2, x3, x4
- [ ] **+5** - в режиме повтора есть возможность выйти в лобби
- [ ] **+5** - в режиме повтора есть возможность вернутся на страницу повторов

Итого: **95**

### Задание супер повышенной сложности
- [ ] **+5** - реализовать бота противника любой сложности
- [ ] **+20** - реализовать бота способного проанализировать шаги игрока и просчитывать наиболее выгодные ходы не менее чем на два хода
- [ ] **+5** - создать бота способного придерживаться любой тактики.  
- [ ] **+10** - создать адаптивного бота способного менять тактики в зависимости от ситуации.

Итого: **40**


### Штрафы
- [ ] **-10** - `eslint` не настроен
- [ ] **-20** Требования к коммитам, репозиторию и PR не выполнены


## Дополнительная информация
- Index DB - https://learn.javascript.ru/indexeddb
- express-websocket - https://habr.com/ru/post/516334/
- express - https://expressjs.com/ru/
- websocket - https://learn.javascript.ru/websocket
- репозиторий с вебпак - https://github.com/abyss-soft/webpack
- настройка вебпак - https://webpack.js.org/guides/getting-started/
